---
name: Documentation

on: [ push ]

env:
  BUNDLE_WITHOUT: development:system_tests
  BUNDLE_WITH: release_prep

jobs:
  release:
    defaults:
      run:
        working-directory: ${{ inputs.working-directory }}
    name: 'Puppet Forge'
    runs-on: ubuntu-latest
    if: github.repository_owner == inputs.allowed_owner
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Setup Ruby
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.2'
          bundler-cache: true
          working-directory: ${{ inputs.working-directory }}
      - name: GitHub Pages
        env:
          PUPPET_GEM_VERSION: "~> 7.0"
        run: bundle exec rake strings:gh_pages:update
